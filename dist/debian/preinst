#!/bin/bash

set -e

# summary of how this script can be called:
#        * <new-preinst> `install'
#        * <new-preinst> `install' <old-version>
#        * <new-preinst> `upgrade' <old-version>
#        * <old-preinst> `abort-upgrade' <new-version>
#
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package

if [ "$1" == "install" ] || [ "$1" == "upgrade" ]; then

  if ! id vx-worker 1> /dev/null 2>&1; then
    groupadd -f -r vx-worker
    useradd -d /var/lib/vexor/worker -g vx-worker -c "Vexor worker daemon" -s /usr/sbin/nologin -r vx-worker
  fi

  install -m 750 -o vx-worker -g vx-worker -d /var/lib/vexor/worker
fi

#DEBHELPER#

exit 0

